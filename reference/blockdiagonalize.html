<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Block-diagonal models using <code>ergm</code> — blockdiagonalize • ergmito</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Block-diagonal models using <code>ergm</code> — blockdiagonalize" />
<meta property="og:description" content="These two functions are used to go back and forth from a pooled ergm vs a
blockdiagonal model, the latter to be fitted using ergm::ergm." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70821549-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70821549-2');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ergmito</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ergm-equations.html">ERGM equations</a>
    </li>
    <li>
      <a href="../articles/extending-ergmito.html">Extending ergmito</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/muriteams/ergmito/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Block-diagonal models using <code>ergm</code></h1>
    <small class="dont-index">Source: <a href='https://github.com/muriteams/ergmito/blob/master/R/ergm_blockdiagonal.R'><code>R/ergm_blockdiagonal.R</code></a></small>
    <div class="hidden name"><code>blockdiagonalize.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These two functions are used to go back and forth from a pooled ergm vs a
blockdiagonal model, the latter to be fitted using <a href='https://rdrr.io/pkg/ergm/man/ergm.html'>ergm::ergm</a>.</p>
    </div>

    <pre class="usage"><span class='fu'>blockdiagonalize</span>(<span class='no'>x</span>, <span class='kw'>attrname</span> <span class='kw'>=</span> <span class='st'>"block"</span>)

<span class='fu'>splitnetwork</span>(<span class='no'>x</span>, <span class='no'>attrname</span>)

<span class='fu'>ergm_blockdiag</span>(<span class='no'>formula</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>In the case of <code>blockdiagonalize</code>, a list of networks or matrices.
For <code>splitnetwork</code> a single network object with a vertex attribute that can
be used to split the data.</p></td>
    </tr>
    <tr>
      <th>attrname</th>
      <td><p>Name of the attribute that holds the block ids.</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>An ergm model which networks' will be wrapped with
blockdiagonalize (see details).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed to the method.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <a href='https://rdrr.io/pkg/ergm/man/ergm.html'>ergm::ergm</a>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function <code>ergm_blockdiag</code> is a wrapper function that takes the
model's network, stacks the networks into a single block diagonal net, and
calls <a href='https://rdrr.io/pkg/ergm/man/ergm.html'>ergm::ergm</a> with the option <code>constraints = blockdiag("block")</code>.</p>
<p>One side effect of this function is that it loads the <code>ergm</code> package via
<a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a>, so after executing the function <code>ergm</code> the package will
be loaded.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>ergm</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required package: network</span></div><div class='output co'>#&gt; <span class='message'>network: Classes for Relational Data</span>
#&gt; <span class='message'>Version 1.16.0 created on 2019-11-30.</span>
#&gt; <span class='message'>copyright (c) 2005, Carter T. Butts, University of California-Irvine</span>
#&gt; <span class='message'>                    Mark S. Handcock, University of California -- Los Angeles</span>
#&gt; <span class='message'>                    David R. Hunter, Penn State University</span>
#&gt; <span class='message'>                    Martina Morris, University of Washington</span>
#&gt; <span class='message'>                    Skye Bender-deMoll, University of Washington</span>
#&gt; <span class='message'> For citation information, type citation("network").</span>
#&gt; <span class='message'> Type help("network-package") to get started.</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>ergm: version 3.10.4, created on 2019-06-10</span>
#&gt; <span class='message'>Copyright (c) 2019, Mark S. Handcock, University of California -- Los Angeles</span>
#&gt; <span class='message'>                    David R. Hunter, Penn State University</span>
#&gt; <span class='message'>                    Carter T. Butts, University of California -- Irvine</span>
#&gt; <span class='message'>                    Steven M. Goodreau, University of Washington</span>
#&gt; <span class='message'>                    Pavel N. Krivitsky, University of Wollongong</span>
#&gt; <span class='message'>                    Martina Morris, University of Washington</span>
#&gt; <span class='message'>                    with contributions from</span>
#&gt; <span class='message'>                    Li Wang</span>
#&gt; <span class='message'>                    Kirk Li, University of Washington</span>
#&gt; <span class='message'>                    Skye Bender-deMoll, University of Washington</span>
#&gt; <span class='message'>                    Chad Klumb</span>
#&gt; <span class='message'>Based on "statnet" project software (statnet.org).</span>
#&gt; <span class='message'>For license and citation information see statnet.org/attribution</span>
#&gt; <span class='message'>or type citation("ergm").</span></div><div class='output co'>#&gt; <span class='message'>NOTE: Versions before 3.6.1 had a bug in the implementation of the bd()</span>
#&gt; <span class='message'>constriant which distorted the sampled distribution somewhat. In</span>
#&gt; <span class='message'>addition, Sampson's Monks datasets had mislabeled vertices. See the</span>
#&gt; <span class='message'>NEWS and the documentation for more details.</span></div><div class='output co'>#&gt; <span class='message'>NOTE: Some common term arguments pertaining to vertex attribute and</span>
#&gt; <span class='message'>level selection have changed in 3.10.0. See terms help for more</span>
#&gt; <span class='message'>details. Use ‘options(ergm.term=list(version="3.9.4"))’ to use old</span>
#&gt; <span class='message'>behavior.</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>fivenets</span>)

<span class='no'>fivenets2</span> <span class='kw'>&lt;-</span> <span class='fu'>blockdiagonalize</span>(<span class='no'>fivenets</span>, <span class='kw'>attrname</span> <span class='kw'>=</span> <span class='st'>"block"</span>) <span class='co'># A network with</span>
<span class='no'>ans0</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/ergm/man/ergm.html'>ergm</a></span>(
  <span class='no'>fivenets2</span> ~ <span class='no'>edges</span> + <span class='fu'><a href='https://rdrr.io/pkg/ergm/man/ergm-terms.html'>nodematch</a></span>(<span class='st'>"female"</span>),
  <span class='kw'>constraints</span> <span class='kw'>=</span> ~<span class='fu'><a href='https://rdrr.io/pkg/ergm/man/ergm-constraints.html'>blockdiag</a></span>(<span class='st'>"block"</span>)
  )</div><div class='output co'>#&gt; <span class='warning'>Warning: `set_attrs()` is deprecated as of rlang 0.3.0</span>
#&gt; <span class='warning'>This warning is displayed once per session.</span></div><div class='output co'>#&gt; <span class='message'>Starting maximum pseudolikelihood estimation (MPLE):</span></div><div class='output co'>#&gt; <span class='message'>Evaluating the predictor and response matrix.</span></div><div class='output co'>#&gt; <span class='message'>Maximizing the pseudolikelihood.</span></div><div class='output co'>#&gt; <span class='message'>Finished MPLE.</span></div><div class='output co'>#&gt; <span class='message'>Stopping at the initial estimate.</span></div><div class='output co'>#&gt; <span class='message'>Evaluating log-likelihood at the estimate. </span></div><div class='output co'>#&gt; </div><div class='input'><span class='no'>ans1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ergmito.html'>ergmito</a></span>(<span class='no'>fivenets</span> ~ <span class='no'>edges</span> + <span class='fu'><a href='https://rdrr.io/pkg/ergm/man/ergm-terms.html'>nodematch</a></span>(<span class='st'>"female"</span>))</div><div class='output co'>#&gt; <span class='warning'>Warning: The observed statistics (target.statistics) are near or at the boundary of its support, i.e. the Maximum Likelihood Estimates maynot exist or be hard to be estimated. In particular, the statistic(s) "edges", "nodematch.female".</span></div><div class='input'>
<span class='co'># This is equivalent</span>
<span class='no'>ans2</span> <span class='kw'>&lt;-</span> <span class='fu'>ergm_blockdiag</span>(<span class='no'>fivenets</span> ~ <span class='no'>edges</span> + <span class='fu'><a href='https://rdrr.io/pkg/ergm/man/ergm-terms.html'>nodematch</a></span>(<span class='st'>"female"</span>))</div><div class='output co'>#&gt; <span class='message'>Starting maximum pseudolikelihood estimation (MPLE):</span></div><div class='output co'>#&gt; <span class='message'>Evaluating the predictor and response matrix.</span></div><div class='output co'>#&gt; <span class='message'>Maximizing the pseudolikelihood.</span></div><div class='output co'>#&gt; <span class='message'>Finished MPLE.</span></div><div class='output co'>#&gt; <span class='message'>Stopping at the initial estimate.</span></div><div class='output co'>#&gt; <span class='message'>Evaluating log-likelihood at the estimate. </span></div><div class='output co'>#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by George Vega Yon, Army Research Laboratory and the U.S. Army Research Office.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


